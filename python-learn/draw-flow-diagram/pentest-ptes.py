#!/usr/bin/env python
# -*- coding: utf-8 -*-

from __future__ import unicode_literals

import pygraphviz as pgv

node_list = ['前期交互','信息搜集','威胁建模', '漏洞分析', '漏洞攻击','后渗透','撰写报告']

edge_list = [
             [node_list[0], node_list[1]],
             [node_list[1], node_list[2]],
             [node_list[2], node_list[3]],
             [node_list[3], node_list[4]],
             [node_list[4], node_list[5]],
             [node_list[5], node_list[6]]
]

g = pgv.AGraph(
    encoding='UTF-8',    # 为了可以显示中文
    # rankdir='LR',       # 从左到右，默认为 TB
    directed=True       # 有向图
)

for node in node_list:
    g.add_node(node, fontname='SimSun', fontsize=10.5, shape='box', style='filled') #宋体
#     g.add_node(vulneral, fontname='Times New Roman', fontsize=12, shape = 'box', style='filled')

for edge in edge_list:
    g.add_edge(edge[0], edge[1])

sub = g.add_subgraph([node_list[3], node_list[4], node_list[2]], rank='same')
#layout
g.layout('dot')
# g.layout('fdp')

g.draw('pentest-ptes.jpg', format='jpg')
